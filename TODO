
TODO bugs/features:

- time set causes desyncs when done with /gamerule dodaynightcycle false
- workers are not marked as idle until 15s after stopping gathering
- turning on fog of war causes a crash when optifine is installed



Fog and map TODOs:

- freeze all chunks where resources are being gathered
    - add them when a block begins to be gathered, and prevent duplicates
    - remove once explored until the next time it is gathered
- can we prevent breaking sounds for grass onChunkExplore?
- any issues caused by stuff happening off-screen? ie. chunks not loaded at all, and MC.level.getBlock() is null/void


BUGS:
    - logging in/out of the world re-saves the blocks...
    - chunks unexplored when unloaded do not save correctly

TEST:
    - set all buildings isExploredClientside = true when fog is disabled
    - all existing buildings are updated correctly after turning OFF fog
    - all existing building chunks are frozen after turning ON fog
    - unfreezing chunks works correctly
    - bridges freeze water chunks correctly
    - freeze all chunks that will have nether blocks spread to them

Other TODOs:
Reveal enemy ghasts briefly when they attack from within fog


[FOG OF WAR] playtest checklist:
--------------------------------
- buildings destroyed offscreen are updated correctly
- buildings placed offscreen are updated correctly
- destroyed buildings no longer have frozenchunks
- explored frozenchunks should not have any unsynced blocks
- night-warping buildings that are destroyed serverside but unexplored clientside should have their night-warping abilities disabled


[BRIDGES] playtest checklist:
-----------------------------
- building placement validity check might be including air blocks on diagonal structures
- building placement validity check is broken on bridgePlaceState=2 (clientside issue)
- check that players joining a map with bridges existing see them correctly clientside
- include unbuilt bridge blocks as overlapping solid blocks during validity check
- 2 structures (diagonal and straight) that alternate when scrolled
- when any blocks are destroyed, replace them with the liquid underneath them if it exists
    - including on building destruction
- when placed, remove any blocks that clip solid terrain or other bridges from the block list
    - test that we can build through seaweed
- do not allow building underwater
- when placed, becomes neutral (ownername == "" on client and server), but still buildable/repairable by anyone
    - meaning this should also not provide vision
- right clicking should not autoattack
- reduce selection dimensions after blocks are culled
- cull from block list any fences that are adjacent to another bridge fence
- check that bridge placement doesn't lag when viewing (due to shouldCullBlock being expensive)






TODO vanilla player balancing/interaction (backlog)
- Balance strong player actions using food:
    - sprinting (very high)
    - attacking (medium)
    - gathering (low)
    - walking and jumping (low)
- Attacking any melee unit that's targeting a player should immediately deal its melee damage to them
- Punching disabled, combat and resource gathering can only be done if the player has tools/weapons
- Turned into a ghost on death - must walk back to a capitol building to be resurrected for a resource cost
- Tools/weapons provided by the RTS player using resources
- Items/utilities for non-RTS players should be produced at existing buildings:
    - Villagers
        - Stockpile - Wooden axe/pickaxe/shovel/hoe
        - Barracks - Weapons
        - Blacksmith - Armour
        - Arcane Tower - Potions
        - Library - Enchanting table
    - Monsters
        - Stockpile - Wooden axe/pickaxe/shovel/hoe
        - Laboratory - Armour + Potions
        - Dungeon - Weapons (via chests)
        - Mausoleum - Enchanting table (after upgrade)
    - Piglins
        - Military portal - Weapons + armor
        - Civilian Portal - Wooden axe/pickaxe/shovel/hoe
        - Flame Sanctuary - potions
        - Wither shrine - Enchanting table