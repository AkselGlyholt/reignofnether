
TODO bugs/features:

- slow down fire/magma/suffocation damage events
- time set causes desyncs when done with /gamerule dodaynightcycle false
- workers are not marked as idle until 10-15s after stopping gathering
- strays sometimes just all lose their clothing layers

- Tutorial documentation/gifs

- multiple arrows hitting the same target bounce
    - maybe give visual-only piercing?
    - piercing causes some sort of deadlock??

- set only non-worker units to avoid leaves
    - Warden constructor shows how we can set pathFindingMalus to have specific mobs avoid specific blocktypes
    - setPathfindingMalus doesn't seem to work?
    - Implement this after netherlings faction since it's needed for fire-immune mobs to freely walk over magma

- test compatibility with a performance improvement mod (eg. optifine)




- remove setNonHeadModelVisibility and make an editor for the portrait model for xyz/scale settings to set for each model

- selecting any single mob (even non-units) and then doubling clicking the hotkey to move to a faraway unit control group will crash the game
    - could also be related to setNonHeadModelVisibility staying active after deselecting a unit
    - almost certainly caused by PortraitRendererUnit.drawEntityOnScreen




TODO test in next playtest

- skeleton attack AI
- 2-chunk vision range to garrisonables
- removing tall trees
- new building health formulas
- creeper building damage
- strongholds
    - including night range
- wardens
- castles
- ravagers
    - mounting
    - roaring
- wardens
    - sonic booms
- silverfish unit and research
- promotion ability

- building messages
    - destroying last building
    - building first capitol
    - being revealed after 1min of destroying a capitol and not rebuilding



TODO buildings/units (backlog)

- endermen can place liquids??
Research: spiders can place webs (limit of 3 per spider lifetime)
    - if implemented, remove research to mount?
Research: Creepers explode with harming cloud effects
Research: Villagers can build Iron Golems (treated as buildings but become iron golem units on completion)


Netherling faction
    All netherling buildings slowly convert non-nether blocks around them into nether counterparts:
        - Grass -> nylium
        - Sand -> soulsand
        - Stone -> netherrack, etc.
        - Water -> lava
    Netherling buildings apart from the Bastion and portals can only be built on nether blocks

    Netherlings do not produce their own units, but instead (like Protoss) bring units in from the nether using portals
    - (Capitol) Bastion Portal
        - blackstone-themed building with a decorated standard purple portal at the centre
        - can build any unit as long as you have the appropriate supporting building/research
        - produces units faster than any other production building
        - only one allowed at any time

    - Inactive portal
        - Simple inactive portal on a pedestal
        - Can be upgraded to specialise (and gain appropriate decorations):
            - Military portal (red): produces military units
            - Civilian portal (green): can drop off resources and supports 15 population
            - Transport portal (blue) (requires lategame research): can teleport units to a linked portal
    - Netherwart farm
    - Fort
        - Allows military piglins and hoglins (after an upgrade) to be produced at portals
        - Researches regular upgrades
        - piglin brute
            - melee sword infantry
            - can be upgraded to hold a shield and toggle to halve projectile damage and movement speed (like footmen in wc3)
        - piglin headhunter
            - ranged trident infantry (should reskin to red to look like pitchforks)
            - can be upgraded to cause knockback on hit
        - hoglin
            - light-medium bruiser
            - can be upgraded to be mounted by headhunters

    - Flame Sanctuary
        - Allows magma cubes and blazes (after an upgrade) to be produced at portals
        - Researches fire-related upgrades
    - Wither Shrine
        - Allows wither skeletons to be produced at portals
        - Researches wither-related upgrades
    - Fortress
        - Ghasts (long-range ranged sieger)
            - probably needs a size decrease
            - flies a set Y height above the ground
        - garrisonable (holds up to 10 units)







TODO tutorial docs

1. Welcome
     - Explaining what the game is about
     - Explaining the game is supposed to be match-based
        - reset on server restart
     - Win condition by destroying opponent's capitol
     - /startrts to start

2. Camera controls
    - top down isometric
    - toggle with F12
    - moving the camera:
        - move mouse to edge of camera
        - alt drag left click
        - minimap (see sec.4)
    - alt scroll to zoom
    - alt drag right click to rotate

3. Unit controls
    If you are an RTS veteran, you can probably skip this section

    selection
        - selection/box-select/double-click-select [gif]
        - selecting different types of units in a group [gif]
        - control groups [gif]
        - click portrait to centre camera on unit
        - F1 to deselect everything

    movement
        - right click move [gif]
        - right click friendly unit to follow
        - hold position - won't move for any reason but will still attack anything in range
        - stop

    combat and stats
        - right click enemy unit or building to attack [gif]
            - ranged units can't attack buildings
        - attack command
            - attack move [gif]
            - force attack friendly
        - units will auto attack enemies they see
        - stats explanations [img]

    casters and abilities
        - cooldowns
        - evoker example [gif]

4. Buildings
    Explanation of how buildings exist and are tracked
    All workers can build buildings for their faction

    Construction [gif]
        - Must be on relatively flat ground
        - Scroll to rotate
        - Assign workers with right click

    Damage and repair [gif]
        - block-count based
        - destroyed at 50% blocks remaining
        - Repair with workers
        - more workers = faster

    Production buildings
        - Rally points [img]
        - Can select multiple
        - Bronze border == research
        - units require population to build


5. Resources and gathering
    Basic explanation

    Resource types [img]
        - food
        - wood
        - ore
    How to gather
        - right click on block or farm [gif]
        - OR use passive gather toggles [img]
        - idle workers button [img]
    Capacity and dropoffs
        - Workers return when at max capacity
        - Can drop off at capitols and stockpiles [gif]
        - All units can hold 1 item over their max [img]
        - Items can be picked up as resources (eg. saplings == wood)
        - Military units can also pick up resourecs, raiding party time! [gif]
        - Drop all items with D

6. Minimap
    Controls
        - click to move camera
        - drag left click to move camera [gif]
        - shift-left-click to recentre map
        - M to open large map
    Attack warnings
        - click to move camera there [gif]
        - right click to ignore
    Clock
        - [img]
        - Undead burn in sunlight and monsters move much more slowly.

7. Fog of war
    - explanation of fog of war mechanics
    - /fog enable | disable for ops
    - showing how blocks are only updated when revealed [gif]


10. Known bugs and limitations





