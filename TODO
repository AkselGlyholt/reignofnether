


TODO bugs/features:

set worldspawn in tutorial map

add in build range limit settable by command /rts-border
    - refresh chunks (allChanged) after changing any worldborder settings (use mixin to detect a call)
    - prevent building or starting the game outside of the worldborder

don't show nether blocks in fog on minimap


To test:
-------
multiplayer testing of data saves
3+ player FFA for stress testing

spiderProd after poison spider upgrade
    - cancel button icon/name
    - spider produces poison spider if upgraded in progress

fog changes and optimisations (test in server!)
    - fog chunks updated when exploring outside of frustum
    - fake blocks are updated correctly once explored and looked at again
    - buildings in fog should disappear on minimap once built
    - lag in first-person mode
    - semifrozen chunks in first-person mode



Misc additions
-----------------
- change witches to auto attack like evokers, reduce cooldown, reduce potion strength and remove lingering effect
    - ability to toggle between potion types
    - ability to toggle between auto-attack targets (ally or enemy)

- add a tier of farm upgrades to each faction
    - pumpkins -> carved pumpkins
    - wheat -> potatoes
    - red nylium netherwart -> green nylium

- recalculate unit pathing as soon as they are damaged, or else melee units attacking each other run past each other a lot
    - most prevalent in 1v1 melee combat

Let workers gather beehives


New Upgrades
------------
MONSTERS: Upgrade for dark watchtowers to come with a shulker in the centre
PIGLINS: Upgrade for ghasts to spread nether on hit (solves issue of spreading base over water)
VILLAGERS: New potions for witches

New Units
---------
MONSTERS: Endermen who can't attack but have a cooldown ability to place shulker boxes (with limited lifespan) (research extends lifespan)
    - comes from end portal building
PIGLINS: Magma cubes (research make melee attacks set enemies on fire)
    - comes from mother cube building - giant building that looks exactly like a magma cube
VILLAGERS: Illusioner - hallucination ability, targeted invisibility (research unlocks second ability)
    - comes from new supplementary building ala-library


Limitations of save data
------------------------
Goals reset - all units stop what they're doing
Production items and held resources are all deposited/refunded automatically
Buildings revealed in fog on minimaps are removed
Control groups are lost
Transport portal links are lost
Entity rally points are lost (and client rallyPos is lost)


Bugs backlog
------------
- time set causes desyncs when done with /gamerule dodaynightcycle false
- workers are not marked as idle until 15s after stopping gathering
- turning on fog of war causes a crash when optifine is installed
- portal blocks crack when explored (because of updating fake frozen blocks)
- minimap still shows physical blocks in fog until the camera moves (and replaces them with fake frozen blocks)
    - because the frozenchunk logic in MinimapClientEvents can save air

(MacOS) minecraft title screen is messed up and doesn't retrieve the assets
(MacOS) GUI scaling does not work
(MacOS) macbooks dont have alt and ctrl (it's option and command)




TODO vanilla player balancing/interaction (backlog)
- Balance strong player actions using food:
    - sprinting (very high)
    - attacking (medium)
    - gathering (low)
    - walking and jumping (low)
- Attacking any melee unit that's targeting a player should immediately deal its melee damage to them
- Punching disabled, combat and resource gathering can only be done if the player has tools/weapons
- Turned into a ghost on death - must walk back to a capitol building to be resurrected for a resource cost
- Tools/weapons provided by the RTS player using resources
- Items/utilities for non-RTS players should be produced at existing buildings:
    - Villagers
        - Stockpile - Wooden axe/pickaxe/shovel/hoe
        - Barracks - Weapons
        - Blacksmith - Armour
        - Arcane Tower - Potions
        - Library - Enchanting table
    - Monsters
        - Stockpile - Wooden axe/pickaxe/shovel/hoe
        - Laboratory - Armour + Potions
        - Dungeon - Weapons (via chests)
        - Mausoleum - Enchanting table (after upgrade)
    - Piglins
        - Military portal - Weapons + armor
        - Civilian Portal - Wooden axe/pickaxe/shovel/hoe
        - Flame Sanctuary - potions
        - Wither shrine - Enchanting table